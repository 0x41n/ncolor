<!DOCTYPE html><html lang=ja><head><meta charset=utf-8><title>いろいじり</title><link rel=icon type=image/svg+xml href=https://0x41n.github.io/file/fav.svg></head><body>色をいじります。それだけです。計算はテキトーです。<br><br><b>RGB変換</b><table onchange=bg() style=text-align:left><tr><td>コード #<input type=text id=c1C maxlength=6 onchange=code() value=dcdcd2><span id=bg1>　　</span></td><td onchange=hsl()>H°<input type=number id=c1H>S<input type=number id=c1S>L<input type=number id=c1L>[%]</td><td>反対色 #<input type=text id=o1C maxlength=6 disabled><span id=bg2>　　</span></td></tr><tr><td onchange=rgb()>　R<input type=number id=c1R>G<input type=number id=c1G>B<input type=number id=c1B></td><td onchange=hsv()>H°<input type=number id=c2H>S<input type=number id=c2S>V<input type=number id=c2V>[%]</td><td>補色　 #<input type=text id=o2C maxlength=6 disabled><span id=bg3>　　</span></td></tr><tr><td onchange=cmyk() colspan=2>　C<input type=number id=pc>M<input type=number id=pm>Y<input type=number id=py>K<input type=number id=pk>[%]</td><td>セーフ #<input type=text id=o3C maxlength=6 disabled><span id=bg6>　　</span></td></tr></table><b>2色比較</b><br><span onchange=grdt(),cntr(),vsmu()>　①#<input type=text id=g1C value=dcdcd2><span id=bg4>　　</span>　②#<input type=text id=g2C value=1e232d><span id=bg5>　　</span>　コントラスト<input type=text id=cont value=1 style=width:3em disabled><span id=wcag></span><br><br><table><tr><td colspan=9>グラデーション <input type=number id=gNum value=3>段階<br><table id=grad></table></td><td></td><td colspan=9>色覚シミュレーション<table id=vsim></table></td></tr></table></span></body><script>const isNum=a=>"number"==typeof a&&isFinite(a),int=(a,l=10)=>isNum(a)?Math.round(a):parseInt(a,l),hx=a=>nn(a,255,0).toString(16).padStart(2,"0"),nn=(a,l,e)=>int(a<e?e:l<a?l:a),cct=(a,l,e)=>hx(a)+hx(l)+hx(e),h2r=a=>6!=a.length?0:[int(a.slice(0,2),16),int(a.slice(2,4),16),int(a.slice(4,6),16)],txl=(a,l,e)=>75<100*Math.max(a,l,e)/255?"444":"EEE",code=a=>{var l=h2r(c1C.value);0!=l&&(c1R.value=l[0],c1G.value=l[1],c1B.value=l[2],s2hsl(...l),s2hsv(...l),opo(...l),safe(...l),s2p(...l))},rgb=a=>{var l=nn(c1R.value,255,0),e=nn(c1G.value,255,0),t=nn(c1B.value,255,0);c1C.value=cct(l,e,t),c1R.value=l,c1G.value=e,c1B.value=t,s2hsl(l,e,t),s2hsv(l,e,t),opo(l,e,t),safe(l,e,t),s2p(l,e,t)},hsl=a=>{let l=nn(c1H.value,360,0),e=nn(c1S.value,100,0),t=nn(c1L.value,100,0),n=t<50?2.55*(t+t*e/100):2.55*(t+(100-t)*e/100),u=t<50?2.55*(t-t*e/100):2.55*(t-(100-t)*e/100),c=n-u,v=l<60?[n,l/60*c+u,u]:l<120?[(120-l)/60*c+u,n,u]:l<180?[u,n,(l-120)/60*c+u]:l<240?[u,(240-l)/60*c+u,n]:l<300?[(l-240)/60*c+u,u,n]:[n,u,(360-l)/60*c+u];v=v.map((a=>int(a))),c1R.value=v[0],c1G.value=v[1],c1B.value=v[2],c1H.value=l,c1S.value=e,c1L.value=t,c1C.value=cct(...v),s2hsv(...v),opo(...v),safe(...v),s2p(...v)},s2hsl=(a,l,e)=>{var t=[a,l,e],n=Math.max(...t),u=Math.min(...t),c=t.indexOf(n),v=n-u;n+=u,u=a==l&&l==e?0:60*(t[(c+1)%3]-t[(c+2)%3])/v+120*c,l=127<(a=n/2)?v/(510-n):v/n,u=isNaN(u)?0:int(u<0?360+u:u),l=isNaN(l)?0:int(100*l),a=isNaN(a)?0:int(100*a/255);c1H.value=u,c1S.value=l,c1L.value=a},hsv=a=>{let l=nn(c2H.value,360,0),e=nn(c2S.value,100,0),t=nn(c2V.value,100,0),n=2.55*t,u=n-e/100*n,c=n-u,v=l<60?[n,l/60*c+u,u]:l<120?[(120-l)/60*c+u,n,u]:l<180?[u,n,(l-120)/60*c+u]:l<240?[u,(240-l)/60*c+u,n]:l<300?[(l-240)/60*c+u,u,n]:[n,u,(360-l)/60*c+u];v=v.map((a=>int(a))),c1R.value=v[0],c1G.value=v[1],c1B.value=v[2],c2H.value=l,c2S.value=e,c2V.value=t,c1C.value=cct(...v),s2hsl(...v),opo(...v),safe(...v),s2p(...v)},s2hsv=(a,l,e)=>{var t=[a,l,e],n=Math.max(...t),u=Math.min(...t),c=t.indexOf(n);a=a==l&&l==e?0:60*(t[(c+1)%3]-t[(c+2)%3])/(n-u)+120*c,l=(n-u)/n,a=isNaN(a)?0:int(a<0?360+a:a),l=isNaN(l)?0:int(100*l);c2H.value=a,c2S.value=l,c2V.value=int(100*n/255)},opo=(a,l,e)=>{o1C.value=cct(255-a,255-l,255-e);var t=Math.max(a,l,e)+Math.min(a,l,e);o2C.value=cct(t-a,t-l,t-e)},safe=(a,l,e)=>{o3C.value=cct(51*int(5*a/255),51*int(5*l/255),51*int(5*e/255))},cmyk=a=>{var l=nn(pk.value,100,0),e=nn(pc.value,100,0),t=nn(pm.value,100,0),n=nn(py.value,100,0),u=int(255*(1-e/100)*(1-l/100)),c=int(255*(1-t/100)*(1-l/100)),v=int(255*(1-n/100)*(1-l/100));c1C.value=cct(u,c,v),c1R.value=u,c1G.value=c,c1B.value=v,pk.value=l,pc.value=e,pm.value=t,py.value=n,s2hsl(u,c,v),s2hsv(u,c,v),opo(u,c,v),safe(u,c,v)},s2p=(a,l,e)=>{var t=1-Math.max(a,l,e)/255;a=(1-a/255-t)/(1-t),l=(1-l/255-t)/(1-t),e=(1-e/255-t)/(1-t);pk.value=nn(100*t,100,0),pc.value=nn(100*a,100,0),pm.value=nn(100*l,100,0),py.value=nn(100*e,100,0)};bg=a=>{bg1.style.backgroundColor="#"+c1C.value,bg2.style.backgroundColor="#"+o1C.value,bg3.style.backgroundColor="#"+o2C.value,bg6.style.backgroundColor="#"+o3C.value},grdt=a=>{var l=nn(gNum.value,15,3),e=h2r(g1C.value),t=h2r(g2C.value);if(gNum.value=l,0!=e&&0!=t){let a=t[0]-e[0],r=t[1]-e[1],s=t[2]-e[2],o="";for(let t=0;t<l;t++){var n=nn(e[0]+a/(l-1)*t,255,0),u=nn(e[1]+r/(l-1)*t,255,0),c=nn(e[2]+s/(l-1)*t,255,0),v=cct(n,u,c);o+=`<tr style="color:#${txl(n,u,c)};background-color:#${v}"><td colspan="3">#${v}</td><td>R${n}</td><td>G${u}</td><td>B${c}</td></tr>`}grad.innerHTML=o,bg4.style.backgroundColor="#"+g1C.value,bg5.style.backgroundColor="#"+g2C.value}},cntr=a=>{var l=h2r(g1C.value),e=h2r(g2C.value);0!=l&&0!=e&&(l=.2126*lrgb(l[0])+.7152*lrgb(l[1])+.0722*lrgb(l[2]),e=.2126*lrgb(e[0])+.7152*lrgb(e[1])+.0722*lrgb(e[2]),e=Math.round((.05+(e<l?l:e))/(.05+(e<l?e:l))*100)/100,cont.value=e,wcag.innerHTML=`文章 <b>${e<4.5?"×":e<7?"AA":"AAA"}</b>, 見出し/UI <b>${e<3?"×":e<4.5?"AA":"AAA"}</b>`)},lrgb=a=>.04045<a/255?Math.pow((a/255+.055)/1.055,2.4):a/3294.6,vsmu=a=>{let l,e,t,n=h2r(g1C.value),u=h2r(g2C.value),c="",v=["もとの色 / C型","1型 / P型","2型 / D型","3型 / T型"];for(n=[n,psmu(...n),dsmu(...n),tsmu(...n)],u=[u,psmu(...u),dsmu(...u),tsmu(...u)],l=0;l<4;l++)e=cct(...n[l]),t=cct(...u[l]),c+=`<tr><td title="#${e}"style="background-color:#${e};color:#${txl(...n[l])}">${v[l]}</td><td title="#${t}"style="background-color:#${t};color:#${txl(...u[l])}">${v[l]}</td></tr>`;vsim.innerHTML=c},mtrx=(a,l)=>{let e,t,n,u=[];for(e=0;e<a.length;e++)for(u.push([]),t=0;t<l[0].length;t++)for(u[e].push(0),n=0;n<a[0].length;n++)u[e][t]+=a[e][n]*l[n][t];return u},psmu=(a,l,e)=>mtrx([[.152286,1.052583,-.204868],[.114503,.786281,.099216],[-.003882,-.048116,1.051998]],[[a],[l],[e]]).flat(1/0),dsmu=(a,l,e)=>mtrx([[.367322,.860646,-.227968],[.280085,.672501,.047413],[-.01182,.04294,.968881]],[[a],[l],[e]]).flat(1/0),tsmu=(a,l,e)=>mtrx([[1.255528,-.076749,-.178779],[-.078411,.930809,.147602],[.004733,.691367,.3039]],[[a],[l],[e]]).flat(1/0),code(),grdt(),cntr(),vsmu(),bg()</script><style>body{color:#444;font-size:small;width:700px;margin:auto;padding:2em;background-color:#eee;user-select:none}input{width:6em;border:none;outline:0;margin:0 .2em;font-weight:700;color:#555;background-color:#fff}table{width:calc(100% - 2em);text-align:center;table-layout:fixed;margin:0 1em;padding:0;border-collapse:collapse;overflow:hidden}input[type=number]{width:3em}#grad,#vsim{height:26em;font-size:.9em}input,span,table{border-radius:.3em}</style></html>
