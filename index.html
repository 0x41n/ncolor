<!DOCTYPE html><html lang=ja><head><meta charset=utf-8><title>いろいじり</title><link id=fav rel=icon type=image/svg+xml></head><body>色をいじります。それだけです。計算はテキトーです。<br><br><b>RGB変換</b><table onchange=bg()><tr><td>コード #<input type=text id=c1C maxlength=6 onchange=code() value=000000><span id=bg1>　　</span></td><td onchange=rgb()>R<input type=number id=c1R value=0>G<input type=number id=c1G value=0>B<input type=number id=c1B value=0></td><td onchange=hsv()>H<input type=number id=c1H value=0>S<input type=number id=c1S value=0>V<input type=number id=c1V value=0></td></tr><tr><td>反対色 #<input type=text id=o1C maxlength=6 value=000000 disabled><span id=bg2>　　</span></td><td>補色 #<input type=text id=o2C maxlength=6 value=000000 disabled><span id=bg3>　　</span></td></tr></table><b>2色比較</b><br><span onchange=grdt(),cntr(),vsmu()>①#<input type=text id=g1C value=000000><span id=bg4>　　</span> ②#<input type=text id=g2C value=000000><span id=bg5>　　</span>　コントラスト<input type=text id=cont value=1 style=width:3em disabled><span id=wcag></span><br><br><table><tr><td colspan=9>グラデーション <input type=number id=gNum value=3>段階<br><table id=grad></table></td><td></td><td colspan=9>色覚シミュレーション<table id=vsim></table></td></tr></table></span></body><script>let int=(l,t=10)=>parseInt(l,t),hx=l=>nn(l,255,0).toString(16).padStart(2,"0"),nn=(l,t,a)=>int(l<a?a:t<l?t:l),cct=(l,t,a)=>hx(l)+hx(t)+hx(a),h2r=l=>6!=l.length?0:[int(l.slice(0,2),16),int(l.slice(2,4),16),int(l.slice(4,6),16)],txl=(l,t,a)=>75<100*Math.max(l,t,a)/255?"444":"EEE",code=l=>{var t=h2r(c1C.value);0!=t&&(c1R.value=t[0],c1G.value=t[1],c1B.value=t[2],s2hsv(...t),opo(...t))},rgb=l=>{var t=nn(c1R.value,255,0),a=nn(c1G.value,255,0),e=nn(c1B.value,255,0);c1C.value=cct(t,a,e),c1R.value=t,c1G.value=a,c1B.value=e,s2hsv(t,a,e),opo(t,a,e)},hsv=l=>{var t=nn(c1H.value,360,0),a=nn(c1S.value,100,0),e=nn(c1V.value,100,0);let r=255*e/100,v;var c=r-a/100*r;(v=t<60?[r,t/60*(r-c)+c,c]:t<120?[(120-t)/60*(r-c)+c,r,c]:t<180?[c,r,(t-120-60)*(r-c)+c]:t<240?[c,(240-t-60)*(r-c)+c,r]:t<300?[(t-240)/60*(r-c)+c,c,r]:[r,c,(360-t)/60*(r-c)+c]).forEach((l,t)=>{v[t]=int(l)}),c1R.value=v[0],c1G.value=v[1],c1B.value=v[2],c1H.value=t,c1S.value=a,c1V.value=e,c1C.value=cct(...v),opo(...v)},s2hsv=(l,t,a)=>{var e=[l,t,a],r=Math.max(...e),v=Math.min(...e),c=e.indexOf(r),n=(c+2)%3,u=(c+1)%3,o=int((r-v)/r*100),g=int(100*r/255),l=l==t&&t==a?0:(e[u]-e[n])/(r-v)*60+120*c,l=isNaN(l)?0:l,o=isNaN(o)?0:o,g=isNaN(g)?0:g;c1H.value=int(l<0?360+l:l),c1S.value=o,c1V.value=g},opo=(l,t,a)=>{o1C.value=cct(255-l,255-t,255-a);var e=Math.max(l,t,a)+Math.min(l,t,a);o2C.value=cct(e-l,e-t,e-a)},bg=l=>{bg1.style.backgroundColor="#"+c1C.value,bg2.style.backgroundColor="#"+o1C.value,bg3.style.backgroundColor="#"+o2C.value},grdt=(bg(),l=>{var v=nn(gNum.value,15,3),c=h2r(g1C.value),n=h2r(g2C.value);if(gNum.value=v,0!=c&&0!=n){let t=n[0]-c[0],a=n[1]-c[1],e=n[2]-c[2],r="";for(let l=0;l<v;l++){var u=nn(c[0]+t/(v-1)*l,255,0),o=nn(c[1]+a/(v-1)*l,255,0),g=nn(c[2]+e/(v-1)*l,255,0),s=cct(u,o,g);r+=`<tr style="color:#${txl(u,o,g)};background-color:#${s}"><td colspan="3">#${s}</td><td>R${u}</td><td>G${o}</td><td>B${g}</td></tr>`}grad.innerHTML=r,bg4.style.backgroundColor="#"+g1C.value,bg5.style.backgroundColor="#"+g2C.value}}),cntr=l=>{var t=h2r(g1C.value),a=h2r(g2C.value);0!=t&&0!=a&&(t=.2126*lrgb(t[0])+.7152*lrgb(t[1])+.0722*lrgb(t[2]),a=.2126*lrgb(a[0])+.7152*lrgb(a[1])+.0722*lrgb(a[2]),a=Math.round((.05+(a<t?t:a))/(.05+(a<t?a:t))*100)/100,cont.value=a,wcag.innerHTML=`文章 <b>${a<4.5?"×":a<7?"AA":"AAA"}</b>, 見出し/UI <b>${a<3?"×":a<4.5?"AA":"AAA"}</b>`)},lrgb=l=>.04045<l/255?Math.pow((l/255+.055)/1.055,2.4):l/3294.6,vsmu=l=>{let t=h2r(g1C.value),a=h2r(g2C.value),e,r="",v=["もとの色 / C型","1型 / P型","2型 / D型","3型 / T型"];for(t=[t,psmu(...t),dsmu(...t),tsmu(...t)],a=[a,psmu(...a),dsmu(...a),tsmu(...a)],e=0;e<4;e++)r+=`<tr><td style="background-color:#${cct(...t[e])};color:#${txl(...t[e])}">${v[e]}</td><td style="background-color:#${cct(...a[e])};color:#${txl(...a[e])}">${v[e]}</td></tr>`;vsim.innerHTML=r},mtrx=(l,t)=>{let a=[],e,r,v;for(e=0;e<l.length;e++)for(a.push([]),r=0;r<t[0].length;r++)for(a[e].push(0),v=0;v<l[0].length;v++)a[e][r]+=l[e][v]*t[v][r];return a},psmu=(l,t,a)=>mtrx([[.152286,1.052583,-.204868],[.114503,.786281,.099216],[-.003882,-.048116,1.051998]],[[l],[t],[a]]).flat(1/0),dsmu=(l,t,a)=>mtrx([[.367322,.860646,-.227968],[.280085,.672501,.047413],[-.01182,.04294,.968881]],[[l],[t],[a]]).flat(1/0),tsmu=(l,t,a)=>mtrx([[1.255528,-.076749,-.178779],[-.078411,.930809,.147602],[.004733,.691367,.3039]],[[l],[t],[a]]).flat(1/0);grdt(),cntr(),vsmu(),fav.href="data:image/svg+xml;charset=utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#141E32"><path d="M3 4v17h6v-12h6v12h6v-16a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2M4.5 16.5h3v3h-3v-3M16.5 16.5h3v3h-3v-3"/><style>@media(prefers-color-scheme:dark){path{fill:#BBB;}}</style></svg>');</script><style>body{color:#444;font-size:small;width:600px;margin:auto;padding:3em;background-color:#eee;user-select:none}input{width:6em;border:none;outline:0;margin:0 .2em;font-weight:700;color:#555;background-color:#fff}table{width:100%;text-align:center;table-layout:fixed;margin:0;padding:0;border-collapse:collapse;overflow:hidden}input[type=number]{width:3em}#grad,#vsim{height:26em;font-size:.9em}input,span,table{border-radius:.3em}</style></html>
