<!DOCTYPE html><html lang=ja><head><meta charset=utf-8><title>いろいじり</title><link id=fav rel=icon type=image/svg+xml></head><body>色をいじります。それだけです。計算はテキトーです。<br><br><b>RGB変換</b><table onchange=bg()><tr><td>コード #<input type=text id=c1C maxlength=6 onchange=code() value=000000><span id=bg1>　　</span></td><td onchange=rgb()>R<input type=number id=c1R value=0>G<input type=number id=c1G value=0>B<input type=number id=c1B value=0></td><td onchange=hsl()>H<input type=number id=c1H value=0>S<input type=number id=c1S value=0>L<input type=number id=c1L value=0></td></tr><tr><td>反対色 #<input type=text id=o1C maxlength=6 value=000000 disabled><span id=bg2>　　</span></td><td>補色 #<input type=text id=o2C maxlength=6 value=000000 disabled><span id=bg3>　　</span></td></tr></table><b>2色比較</b><br><span onchange=grdt(),cntr(),vsmu()>①#<input type=text id=g1C value=000000><span id=bg4>　　</span> ②#<input type=text id=g2C value=000000><span id=bg5>　　</span>　コントラスト<input type=text id=cont value=1 style=width:3em disabled><span id=wcag></span><br><br><table><tr><td colspan=9>グラデーション <input type=number id=gNum value=3>段階<br><table id=grad></table></td><td></td><td colspan=9>色覚シミュレーション<table id=vsim></table></td></tr></table></span></body><script>let int=(l,t=10)=>parseInt(l,t),hx=l=>nn(l,255,0).toString(16).padStart(2,"0"),nn=(l,t,a)=>int(l<a?a:t<l?t:l),cct=(l,t,a)=>hx(l)+hx(t)+hx(a),h2r=l=>6!=l.length?0:[int(l.slice(0,2),16),int(l.slice(2,4),16),int(l.slice(4,6),16)],txl=(l,t,a)=>75<100*Math.max(l,t,a)/255?"444":"EEE",code=l=>{var t=h2r(c1C.value);0!=t&&(c1R.value=t[0],c1G.value=t[1],c1B.value=t[2],s2hsl(...t),opo(...t))},rgb=l=>{var t=nn(c1R.value,255,0),a=nn(c1G.value,255,0),e=nn(c1B.value,255,0);c1C.value=cct(t,a,e),c1R.value=t,c1G.value=a,c1B.value=e,s2hsl(t,a,e),opo(t,a,e)},hsl=l=>{let t=nn(c1H.value,360,0),a=nn(c1S.value,100,0),e=nn(c1L.value,100,0),r=e<50?2.55*(e+e*a/100):2.55*(e+(100-e)*a/100),c=e<50?2.55*(e-e*a/100):2.55*(e-(100-e)*a/100),n=r-c,u=t<60?[r,t/60*n+c,c]:t<120?[(120-t)/60*n+c,r,c]:t<180?[c,r,(t-120)/60*n+c]:t<240?[c,(240-t)/60*n+c,r]:t<300?[(t-240)/60*n+c,c,r]:[r,c,(360-t)/60*n+c];u=u.map((l=>int(l))),c1R.value=u[0],c1G.value=u[1],c1B.value=u[2],c1H.value=t,c1S.value=a,c1L.value=e,c1C.value=cct(...u),opo(...u)},s2hsl=(l,t,a)=>{var e=[l,t,a],r=Math.max(...e),c=Math.min(...e),n=e.indexOf(r),u=r-c;r+=c,c=l==t&&t==a?0:60*(e[(n+1)%3]-e[(n+2)%3])/u+120*n,t=127<(l=r/2)?u/(510-r):u/r,c=isNaN(c)?0:int(c<0?360+c:c),t=isNaN(t)?0:int(100*t),l=isNaN(l)?0:int(100*l/255);c1H.value=c,c1S.value=t,c1L.value=l},opo=(l,t,a)=>{o1C.value=cct(255-l,255-t,255-a);var e=Math.max(l,t,a)+Math.min(l,t,a);o2C.value=cct(e-l,e-t,e-a)},bg=l=>{bg1.style.backgroundColor="#"+c1C.value,bg2.style.backgroundColor="#"+o1C.value,bg3.style.backgroundColor="#"+o2C.value},grdt=(bg(),l=>{var t=nn(gNum.value,15,3),a=h2r(g1C.value),e=h2r(g2C.value);if(gNum.value=t,0!=a&&0!=e){let l=e[0]-a[0],v=e[1]-a[1],o=e[2]-a[2],g="";for(let e=0;e<t;e++){var r=nn(a[0]+l/(t-1)*e,255,0),c=nn(a[1]+v/(t-1)*e,255,0),n=nn(a[2]+o/(t-1)*e,255,0),u=cct(r,c,n);g+=`<tr style="color:#${txl(r,c,n)};background-color:#${u}"><td colspan="3">#${u}</td><td>R${r}</td><td>G${c}</td><td>B${n}</td></tr>`}grad.innerHTML=g,bg4.style.backgroundColor="#"+g1C.value,bg5.style.backgroundColor="#"+g2C.value}}),cntr=l=>{var t=h2r(g1C.value),a=h2r(g2C.value);0!=t&&0!=a&&(t=.2126*lrgb(t[0])+.7152*lrgb(t[1])+.0722*lrgb(t[2]),a=.2126*lrgb(a[0])+.7152*lrgb(a[1])+.0722*lrgb(a[2]),a=Math.round((.05+(a<t?t:a))/(.05+(a<t?a:t))*100)/100,cont.value=a,wcag.innerHTML=`文章 <b>${a<4.5?"×":a<7?"AA":"AAA"}</b>, 見出し/UI <b>${a<3?"×":a<4.5?"AA":"AAA"}</b>`)},lrgb=l=>.04045<l/255?Math.pow((l/255+.055)/1.055,2.4):l/3294.6,vsmu=l=>{let t,a,e,r=h2r(g1C.value),c=h2r(g2C.value),n="",u=["もとの色 / C型","1型 / P型","2型 / D型","3型 / T型"];for(r=[r,psmu(...r),dsmu(...r),tsmu(...r)],c=[c,psmu(...c),dsmu(...c),tsmu(...c)],t=0;t<4;t++)a=cct(...r[t]),e=cct(...c[t]),n+=`<tr><td title="#${a}"style="background-color:#${a};color:#${txl(...r[t])}">${u[t]}</td><td title="#${e}"style="background-color:#${e};color:#${txl(...c[t])}">${u[t]}</td></tr>`;vsim.innerHTML=n},mtrx=(l,t)=>{let a,e,r,c=[];for(a=0;a<l.length;a++)for(c.push([]),e=0;e<t[0].length;e++)for(c[a].push(0),r=0;r<l[0].length;r++)c[a][e]+=l[a][r]*t[r][e];return c},psmu=(l,t,a)=>mtrx([[.152286,1.052583,-.204868],[.114503,.786281,.099216],[-.003882,-.048116,1.051998]],[[l],[t],[a]]).flat(1/0),dsmu=(l,t,a)=>mtrx([[.367322,.860646,-.227968],[.280085,.672501,.047413],[-.01182,.04294,.968881]],[[l],[t],[a]]).flat(1/0),tsmu=(l,t,a)=>mtrx([[1.255528,-.076749,-.178779],[-.078411,.930809,.147602],[.004733,.691367,.3039]],[[l],[t],[a]]).flat(1/0);grdt(),cntr(),vsmu(),fav.href="data:image/svg+xml;charset=utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#141E32"><path d="M3 4v17h6v-12h6v12h6v-16a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2M4.5 16.5h3v3h-3v-3M16.5 16.5h3v3h-3v-3"/><style>@media(prefers-color-scheme:dark){path{fill:#BBB;}}</style></svg>')</script><style>body{color:#444;font-size:small;width:600px;margin:auto;padding:3em;background-color:#eee;user-select:none}input{width:6em;border:none;outline:0;margin:0 .2em;font-weight:700;color:#555;background-color:#fff}table{width:100%;text-align:center;table-layout:fixed;margin:0;padding:0;border-collapse:collapse;overflow:hidden}input[type=number]{width:3em}#grad,#vsim{height:26em;font-size:.9em}input,span,table{border-radius:.3em}</style></html>
